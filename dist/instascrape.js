"use strict";"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o)for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}return i},writable:!0,configurable:!0});var InstaScrape=function(){var e={host:"https://www.instagram.com/",username:"",tag:"",container:"",get_data:!1,callback:null,items:8,image_size:640},d={150:0,240:1,320:2,480:3,640:4};return function(t){this.options=Object.assign({},e),this.options=Object.assign(this.options,t),this.is_tag=""==this.options.username,this.valid=!0,""==this.options.username&&""==this.options.tag?(console.error("InstaScrape: Error: Missing username."),this.valid=!1):this.options.get_data||""!=this.options.container?this.options.get_data&&"function"!=typeof this.options.callback&&(console.error("InstaScrape: Error, invalid or undefined callback for get_data"),this.valid=!1):(console.error("InstaScrape: Error, no container found."),this.valid=!1),this.get=function(i){var s=this.is_tag?this.options.host+"explore/tags/"+this.options.tag:this.options.host+this.options.username,o=new XMLHttpRequest,n=this;o.onload=function(t){if(4===o.readyState)if(200===o.status){var e=o.responseText.split("window._sharedData = ")[1].split("<\/script>")[0];null===(e=(e=JSON.parse(e.substr(0,e.length-1))).entry_data.ProfilePage||e.entry_data.TagPage||null)?(console.log(s),console.error("InstaScrape: Request error. No data retrieved: "+o.statusText)):(e=e[0].graphql.user||e[0].graphql.hashtag,i(e,n))}else console.error("InstaScrape: Request error. Response: "+o.statusText)},o.open("GET",s,!0),o.send()},this.parse_caption=function(t,e){return void 0!==t.node.edge_media_to_caption.edges[0]&&0!=t.node.edge_media_to_caption.edges[0].node.text.length?t.node.edge_media_to_caption.edges[0].node.text:void 0!==t.node.title&&0!=t.node.title.length?t.node.title:void 0!==t.node.accessibility_caption&&0!=t.node.accessibility_caption.length?t.node.accessibility_caption:(this.is_tag?e.name:e.username)+" image "},this.display=function(t){var e="",i="",s=void 0!==d[this.options.image_size]?d[this.options.image_size]:d[640];if(void 0!==t.is_private&&!0===t.is_private)console.log("This profile is private");else{var o=(t.edge_owner_to_timeline_media||t.edge_hashtag_to_media).edges;e=o.length>this.options.items?this.options.items:o.length,i="",i+="<div class='instagram_gallery'>";for(var n=0;n<e;n++){var a="https://www.instagram.com/p/"+o[n].node.shortcode,r=void 0,c=void 0,l=this.parse_caption(o[n],t);switch(o[n].node.__typename){case"GraphSidecar":c="sidecar",r=o[n].node.thumbnail_resources[s].src;break;case"GraphVideo":c="video",r=o[n].node.thumbnail_src;break;default:c="image",r=o[n].node.thumbnail_resources[s].src}this.is_tag&&(t.username=""),i+="<a href='"+a+"' class='instagram-"+c+"' title='"+l.substring(0,100)+"' rel='noopener' target='_blank'>",i+="<img src='"+r+"' alt='"+l.substring(0,100)+"' />",i+="</a>"}i+="</div>"}this.options.container.innerHTML=i},this.run=function(){this.get(function(t,e){e.options.get_data?e.options.callback(t):e.display(t)})},this.valid&&this.run()}}();
//# sourceMappingURL=instascrape.js.map
